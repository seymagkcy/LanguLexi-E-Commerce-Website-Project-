@model CartViewModel

@{
	ViewData["Title"] = "Sepetim";
}

<section class="container my-5">
	<div class="text-center">
		<h1 class="display-4">Sepetim</h1>
	</div>

	<div class="row">
		@if(Model.CartItems.Any())
		{
			<div class="col-md-8">
				<div class ="table-responsive">
					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th>Kurs</th>
								<th>Fiyat</th>
								<th>Miktar</th>
								<th>Toplam</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							@foreach(var item in Model.CartItems)
							{
								<tr>
									<td>
										<img src="/img/CourseImages/@item.Course.Image" alt="" height="37"/>
									</td>
									<td>
										<a class="nav-link text-dark" href="/Courses/Details/@item.Course.Id"></a>
										@item.Course.Title
									</td>
									<td>
										@item.Course.Price.ToString("c")
									</td>
									<td>
										@item.Quantity
									</td>
									<td>
										@((item.Quantity * item.Course.Price).ToString("c"))
									</td>
									<td>
										<form asp-action="Remove" asp-controller="Cart">
											<input type="hidden" name="CourseId" value="@item.Course.Id"/>
											<button class="btn btn-sm btn-danger" type="submit">
												<i class="bi bi-cart-x-fill"></i>
											</button>
										</form>
									</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			</div>
			<div>
				<h4>Sepet Toplamı</h4>
				<span>@Model.TotalPrice</span>
			</div>

			<div class="text-center">
				<a href="/" class="btn btn-danger">
					<i class="bi bi-cart me-1"></i> Alışverişe Devam Et
				</a>

				<a href="/Cart/Checkout" class="btn btn-success">
					<i class="bi bi-credit-card me-1"></i> Sepeti Onayla ve Öde
				</a>
			</div>
		}
		else
		{
			<div class="container">
				<div class="alert alert-warning my-5">
					<h3>Sepetinizde Ürün Bulunmamaktadır!</h3>
				</div>
			</div>
		}
	</div>
</section>